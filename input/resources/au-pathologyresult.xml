<?xml version="1.0" encoding="utf-8"?>
<StructureDefinition xmlns="http://hl7.org/fhir">
  <id value="au-pathologyresult" />
  <extension url="http://hl7.org/fhir/StructureDefinition/structuredefinition-fmm">
    <valueInteger value="1"/> 
  </extension>
  <url value="http://hl7.org.au/fhir/StructureDefinition/au-pathologyresult" />
  <name value="AUBasePathologyResult" />
  <title value="AU Base Pathology Result" />
  <status value="draft" />
  <description value="This profile defines an observation structure to represent a pathology test result issued by a diagnostic service provider in an Australian context. This profile is intended to be capable of supporting reporting for all pathology disciplines (e.g. including microbiology, histopathology, cytology, blood transfusion) with the exception of genomics. The observation may represent the result of a simple test such as haemoglobin or it may group the set of results produced by a multi-test study or panel such as a full blood count, or urine specimen study.&#xa;&#xa;This profile does not provide full support for structured pathology reporting. It is expected that this support is best handled by a set of profiles that represent the structured reporting requirements for each specific protocol (see for example [RCPAâ€™s structured pathology reporting of cancer](https://www.rcpa.edu.au/Library/Practising-Pathology/Structured-Pathology-Reporting-of-Cancer)); this is not in the scope of this implementation guide at this time." />
  <kind value="resource" />
  <abstract value="false" />
  <type value="Observation" />
  <baseDefinition value="http://hl7.org/fhir/StructureDefinition/Observation" />
  <derivation value="constraint" />
  <differential>
    <element id="Observation">
      <path value="Observation" />
      <short value="A pathology test result in an Australian healthcare context" />
      <definition value="A pathology test result for a patient. This observation may be a simple test or a panel/study." />
      <constraint>
        <key value="inv-obs-0" />
        <severity value="error" />
        <human value="A pathology result shall at least have value or data absent reason or a child observation with a value or data absent reason" />
        <expression value="value.exists() or dataAbsentReason.exists() or hasMember.exists() or component.value.exists() or component.dataAbsentReason.exists()" />
      </constraint>
    </element>
    <element id="Observation.category">
      <path value="Observation.category"/>
      <slicing>
        <discriminator>
          <type value="value"/>
          <path value="coding.system"/>
        </discriminator>
        <discriminator>
          <type value="value"/>
          <path value="coding.code"/>
        </discriminator>
        <rules value="open"/>
      </slicing>
      <short value="Classification of the service requested as laboratory + more specific discipline where available"/>
      <comment value="A fixed category denoting a laboratory service identifies the type of observation and supports handling and searching of observations. A second category to provide a finer grain of discipline, e.g. Haematology should be provided if possible."/>
      <min value="1"/>
    </element>
    <element id="Observation.category:lab">
      <path value="Observation.category"/>
      <sliceName value="lab"/>
      <short value="Observation generated by laboratories"/>
      <min value="1"/>
      <max value="1"/>
    </element>
    <element id="Observation.category:lab.coding">
      <path value="Observation.category.coding"/>
      <min value="1"/>
    </element>
    <element id="Observation.category:lab.coding.system">
      <path value="Observation.category.coding.system"/>
      <min value="1"/>
      <fixedUri value="http://terminology.hl7.org/CodeSystem/observation-category"/>
    </element>
    <element id="Observation.category:lab.coding.code">
      <path value="Observation.category.coding.code" />
      <min value="1" />
      <fixedCode value="laboratory" />
    </element>
    <element id="Observation.category:specificDiscipline">
      <path value="Observation.category"/>
      <sliceName value="specificDiscipline"/>
      <short value="Specific discipline of pathology"/>
      <binding>
        <strength value="extensible"/>
        <valueSet value="https://healthterminologies.gov.au/fhir/ValueSet/pathology-diagnostic-service-category-1"/>
      </binding>
    </element>
    <element id="Observation.category:specificDiscipline.coding.system">
      <path value="Observation.category.coding.system"/>
      <min value="1"/>
      <fixedUri value="http://terminology.hl7.org/CodeSystem/v2-0074"/>
    </element>
    <element id="Observation.code">
      <path value="Observation.code" />
      <short value="Pathology test or test group" />
      <binding>
        <extension url="http://hl7.org/fhir/tools/StructureDefinition/additional-binding">
          <extension url="purpose">
            <valueCode value="component"/>
          </extension>
          <extension url="valueSet">
            <valueCanonical value="https://www.rcpa.edu.au/fhir/ValueSet/spia-chemical-pathology-refset-3"/>
          </extension>
          <extension url="documentation">
            <valueMarkdown value="For reporting chemical pathology results in Australia."/>
          </extension>
        </extension>
        <extension url="http://hl7.org/fhir/tools/StructureDefinition/additional-binding">
          <extension url="purpose">
            <valueCode value="component"/>
          </extension>
          <extension url="valueSet">
            <valueCanonical value="https://www.rcpa.edu.au/fhir/ValueSet/spia-haematology-refset-3"/>
          </extension>
          <extension url="documentation">
            <valueMarkdown value="For reporting haematology pathology results in Australia."/>
          </extension>
        </extension>
        <extension url="http://hl7.org/fhir/tools/StructureDefinition/additional-binding">
          <extension url="purpose">
            <valueCode value="component"/>
          </extension>
          <extension url="valueSet">
            <valueCanonical value="https://www.rcpa.edu.au/fhir/ValueSet/spia-immunopathology-refset-3"/>
          </extension>
          <extension url="documentation">
            <valueMarkdown value="For reporting immunopathology pathology results in Australia."/>
          </extension>
        </extension>
        <extension url="http://hl7.org/fhir/tools/StructureDefinition/additional-binding">
          <extension url="purpose">
            <valueCode value="component"/>
          </extension>
          <extension url="valueSet">
            <valueCanonical value="https://www.rcpa.edu.au/fhir/ValueSet/spia-microbiology-serology-molecular-refset-3"/>
          </extension>
          <extension url="documentation">
            <valueMarkdown value="For reporting microbiology pathology results in Australia."/>
          </extension>
        </extension>
        <strength value="preferred" />
        <valueSet value="https://healthterminologies.gov.au/fhir/ValueSet/spia-pathology-reporting-1" />
      </binding>
    </element>
    <element id="Observation.subject">
      <path value="Observation.subject" />
      <min value="1" />
      <type>
        <code value="Reference" />
        <targetProfile value="http://hl7.org/fhir/StructureDefinition/Patient" />
      </type>
    </element>
    <element id="Observation.effective[x]">
      <path value="Observation.effective[x]" />
      <short value="Time of specimen collection" />
      <min value="1" />
      <type>
        <code value="dateTime" />
      </type>
      <type>
        <code value="Period" />
      </type>
    </element>
    <element id="Observation.value[x]">
      <path value="Observation.value[x]" />
      <condition value="inv-obs-0"/>
    </element>
    <element id="Observation.dataAbsentReason">
      <path value="Observation.dataAbsentReason" />
      <condition value="inv-obs-0"/>
    </element>
    <element id="Observation.specimen">
      <path value="Observation.specimen" />
      <type>
        <code value="Reference" />
        <targetProfile value="http://hl7.org.au/fhir/StructureDefinition/au-specimen" />
      </type>
    </element>
    <element id="Observation.hasMember">
      <path value="Observation.hasMember" />
      <short value="Individual tests in a group or panel" />
      <type>
        <code value="Reference" />
        <targetProfile value="http://hl7.org.au/fhir/StructureDefinition/au-diagnosticresult" />
        <targetProfile value="http://hl7.org.au/fhir/StructureDefinition/au-pathologyresult" />
      </type>
      <condition value="inv-obs-0"/>
    </element>
    <element id="Observation.component">
      <path value="Observation.component" />
      <short value="Individual tests in a group or panel" />
    </element>
    <element id="Observation.component.code">
      <path value="Observation.component.code" />
      <short value="Individual pathology test" />
      <binding>
        <strength value="preferred" />
        <valueSet value="https://healthterminologies.gov.au/fhir/ValueSet/spia-pathology-reporting-1" />
      </binding>
    </element>
    <element id="Observation.component.value[x]">
      <path value="Observation.component.value[x]" />
      <condition value="inv-obs-0"/>
    </element>
    <element id="Observation.component.dataAbsentReason">
      <path value="Observation.component.dataAbsentReason" />
      <condition value="inv-obs-0"/>
    </element>
  </differential>
</StructureDefinition>