<?xml version="1.0" encoding="utf-8"?>
<StructureDefinition xmlns="http://hl7.org/fhir">
  <id value="au-dispenserecord"/>
  <url value="http://hl7.org.au/fhir/StructureDefinition/au-dispenserecord"/>
  <version value="1.0.0"/>
  <name value="AUBaseDispenseRecord"/>
  <title value="AU Base Dispense Record"/>
  <status value="draft"/>
  <date value="2017-05-11T09:51:36.6519188+10:00"/>
  <publisher value="Health Level Seven Australia (Medications WG)"/>
  <contact>
    <telecom>
      <system value="url"/>
      <value value="http://hl7.org.au/fhir"/>
      <use value="work"/>
    </telecom>
  </contact>
  <description
    value="This profile defines a medication dispense structure including core localisation concepts for use as a dispense record in an Australian context."/>
  <fhirVersion value="3.0.1"/>
  <kind value="resource"/>
  <abstract value="false"/>
  <type value="MedicationDispense"/>
  <baseDefinition value="http://hl7.org/fhir/StructureDefinition/MedicationDispense"/>
  <derivation value="constraint"/>
  <differential>
    <element id="MedicationDispense">
      <path value="MedicationDispense"/>
      <short
        value="A dispense record for a medication for a patient in an Australian healthcare context"/>
      <definition value="Dispensing of a medication to patient in an Australian healthcare contex"/>
    </element>
    <element id="MedicationDispense.extension">
      <path value="MedicationDispense.extension"/>
      <slicing>
        <discriminator>
          <type value="value"/>
          <path value="url"/>
        </discriminator>
        <rules value="open"/>
      </slicing>
    </element>
    <element id="MedicationDispense.extension:groundsForConcurrentSupply">
      <path value="MedicationDispense.extension"/>
      <sliceName value="groundsForConcurrentSupply"/>
      <short value="Grounds for Concurrent Supply of Medication"/>
      <max value="1"/>
      <type>
        <code value="Extension"/>
        <profile value="http://hl7.org.au/fhir/StructureDefinition/grounds-for-concurrent-supply"/>
      </type>
    </element>
    <element id="MedicationDispense.extension:dispenseNumber">
      <path value="MedicationDispense.extension"/>
      <sliceName value="dispenseNumber"/>
      <short value="Number of this Dispense"/>
      <type>
        <code value="Extension"/>
        <profile value="http://hl7.org.au/fhir/StructureDefinition/dispense-number"/>
      </type>
    </element>
    <element id="MedicationDispense.extension:brandName">
      <path value="MedicationDispense.extension"/>
      <sliceName value="brandName"/>
      <short value="Medication Brand Name"/>
      <type>
        <code value="Extension"/>
        <profile value="http://hl7.org.au/fhir/StructureDefinition/medication-brand-name"/>
      </type>
    </element>
    <element id="MedicationDispense.extension:genericName">
      <path value="MedicationDispense.extension"/>
      <sliceName value="genericName"/>
      <short value="Medication Generic Drug Name"/>
      <type>
        <code value="Extension"/>
        <profile value="http://hl7.org.au/fhir/StructureDefinition/medication-generic-name"/>
      </type>
    </element>
    <element id="MedicationDispense.identifier">
      <path value="MedicationDispense.identifier"/>
      <slicing>
        <discriminator>
          <type value="value"/>
          <path value="system"/>
        </discriminator>
        <discriminator>
          <type value="value"/>
          <path value="type"/>
        </discriminator>
        <rules value="open"/>
      </slicing>
    </element>
    <element id="MedicationDispense.identifier:localDispenseIdentifier">
      <path value="MedicationDispense.identifier"/>
      <sliceName value="localDispenseIdentifier"/>
      <short value="Local Dispense Identifier"/>
      <definition
        value="Identifier assigned by the dispensing system this allows linking of this dispensing record to a local system identfier."
      />
    </element>
    <element id="MedicationDispense.identifier:localDispenseIdentifier.type">
      <path value="MedicationDispense.identifier.type"/>
      <short value="Coded identifier type for local dispense identifier"/>
      <min value="1"/>
      <binding>
        <extension url="http://hl7.org/fhir/StructureDefinition/elementdefinition-bindingName">
          <valueString value="IdentifierType"/>
        </extension>
        <extension url="http://hl7.org/fhir/StructureDefinition/elementdefinition-isCommonBinding">
          <valueBoolean value="true"/>
        </extension>
        <strength value="required"/>
        <description value="Local identifier type"/>
        <valueSetReference>
          <reference value="http://hl7.org.au/fhir/ValueSet/au-hl7v2-0203"/>
        </valueSetReference>
      </binding>
    </element>
    <element id="MedicationDispense.identifier:localDispenseIdentifier.type.coding">
      <path value="MedicationDispense.identifier.type.coding"/>
      <min value="1"/>
      <max value="1"/>
    </element>
    <element id="MedicationDispense.identifier:localDispenseIdentifier.type.coding.system">
      <path value="MedicationDispense.identifier.type.coding.system"/>
      <min value="1"/>
      <fixedUri value="http://hl7.org.au/fhir/v2/0203"/>
    </element>
    <element id="MedicationDispense.identifier:localDispenseIdentifier.type.coding.code">
      <path value="MedicationDispense.identifier.type.coding.code"/>
      <min value="1"/>
      <fixedCode value="LDI"/>
    </element>
    <element id="MedicationDispense.identifier:localDispenseIdentifier.type.text">
      <extension url="http://hl7.org/fhir/StructureDefinition/elementdefinition-translatable">
        <valueBoolean value="true"/>
      </extension>
      <path value="MedicationDispense.identifier.type.text"/>
      <min value="1"/>
      <fixedString value="Local Dispense Identifier"/>
    </element>
    <element id="MedicationDispense.identifier:localDispenseIdentifier.system">
      <path value="MedicationDispense.identifier.system"/>
      <short value="Namespace for local dispense record identifier"/>
      <definition value="URL assigned by the local dispensing system."/>
      <min value="1"/>
    </element>
    <element id="MedicationDispense.identifier:localDispenseIdentifier.value">
      <path value="MedicationDispense.identifier.value"/>
      <short value="Dispense record identifier"/>
      <min value="1"/>
    </element>
    <element id="MedicationDispense.identifier:localDispenseIdentifier.assigner">
      <path value="MedicationDispense.identifier.assigner"/>
      <min value="1"/>
    </element>
    <element id="MedicationDispense.identifier:localDispenseIdentifier.assigner.display">
      <extension url="http://hl7.org/fhir/StructureDefinition/elementdefinition-translatable">
        <valueBoolean value="true"/>
      </extension>
      <path value="MedicationDispense.identifier.assigner.display"/>
      <min value="1"/>
    </element>
    <element id="MedicationDispense.medication[x]">
      <path value="MedicationDispense.medication[x]"/>
      <slicing>
        <discriminator>
          <type value="type"/>
          <path value="$this"/>
        </discriminator>
        <rules value="open"/>
      </slicing>
      <type>
        <code value="CodeableConcept"/>
      </type>
      <type>
        <code value="Reference"/>
        <targetProfile value="http://hl7.org.au/fhir/StructureDefinition/au-medication"/>
      </type>
    </element>
    <element id="MedicationDispense.medication[x]:medicationCoded">
      <path value="MedicationDispense.medication[x]"/>
      <sliceName value="medicationCoded"/>
      <short value="Coded Dispensed Medication"/>
      <type>
        <code value="CodeableConcept"/>
      </type>
    </element>
    <element id="MedicationDispense.medication[x]:medicationCoded.coding">
      <path value="MedicationDispense.medication[x].coding"/>
      <slicing>
        <discriminator>
          <type value="value"/>
          <path value="system"/>
        </discriminator>
        <discriminator>
          <type value="value"/>
          <path value="code"/>
        </discriminator>
        <rules value="open"/>
      </slicing>
    </element>
    <element id="MedicationDispense.medication[x]:medicationCoded.coding:pbs">
      <path value="MedicationDispense.medication[x].coding"/>
      <sliceName value="pbs"/>
      <short value="PBS Item Code"/>
      <definition
        value="PBS code from http://pbs.gov.au/code/item. Use of PBS as a code to refer to a type of medication, this excludes implication of context based on the PBS code. Where context is to be implied or stated PBS code needs to be associated with recording a prescription (MedicationRequest) or dispense record(MedicationDispense)"/>
      <binding>
        <strength value="required"/>
        <valueSetReference>
          <reference value="http://hl7.org.au/fhir/ValueSet/pbs-item"/>
        </valueSetReference>
      </binding>
    </element>
    <element id="MedicationDispense.medication[x]:medicationCoded.coding:gtin">
      <path value="MedicationDispense.medication[x].coding"/>
      <sliceName value="gtin"/>
      <short value="Medication Package Global Trade Item Number (GTIN)"/>
      <definition value="GTIN value from http://www.gs1.org/gtin."/>
      <binding>
        <strength value="required"/>
        <valueSetReference>
          <reference value="http://hl7.org.au/fhir/ValueSet/gtin"/>
        </valueSetReference>
      </binding>
    </element>
    <element id="MedicationDispense.medication[x]:medicationCoded.coding:amtTPP">
      <path value="MedicationDispense.medication[x].coding"/>
      <sliceName value="amtTPP"/>
      <short value="AMT Trade Product Pack"/>
      <max value="1"/>
      <binding>
        <strength value="required"/>
        <valueSetReference>
          <reference value="http://hl7.org.au/fhir/ValueSet/amt-tpp-codes"/>
        </valueSetReference>
      </binding>
    </element>
    <element id="MedicationDispense.medication[x]:medicationCoded.coding:amtTPP.extension">
      <path value="MedicationDispense.medication[x].coding.extension"/>
      <slicing>
        <discriminator>
          <type value="value"/>
          <path value="url"/>
        </discriminator>
        <rules value="open"/>
      </slicing>
    </element>
    <element
      id="MedicationDispense.medication[x]:medicationCoded.coding:amtTPP.extension:medicationType">
      <path value="MedicationDispense.medication[x].coding.extension"/>
      <sliceName value="medicationType"/>
      <short value="Type of Medication Coding"/>
      <definition
        value="General category of coding to allow usage of codes to be distinguished from the same CodeSystem"/>
      <max value="1"/>
      <type>
        <code value="Extension"/>
        <profile value="http://hl7.org.au/fhir/StructureDefinition/medication-type"/>
      </type>
    </element>
    <element
      id="MedicationDispense.medication[x]:medicationCoded.coding:amtTPP.extension:medicationType.valueCoding:valueCoding">
      <path value="MedicationDispense.medication[x].coding.extension.valueCoding"/>
      <sliceName value="valueCoding"/>
      <fixedCoding>
        <system value="http://hl7.org.au/fhir/CodeSystem/medication-type"/>
        <code value="BPG"/>
        <display value="Branded package with no container"/>
      </fixedCoding>
    </element>
    <element id="MedicationDispense.medication[x]:medicationCoded.coding:amtMPP">
      <path value="MedicationDispense.medication[x].coding"/>
      <sliceName value="amtMPP"/>
      <short value="AMT Medicinal Product Pack"/>
      <max value="1"/>
      <binding>
        <strength value="required"/>
        <valueSetReference>
          <reference value="http://hl7.org.au/fhir/ValueSet/amt-mpp-codes"/>
        </valueSetReference>
      </binding>
    </element>
    <element id="MedicationDispense.medication[x]:medicationCoded.coding:amtMPP.extension">
      <path value="MedicationDispense.medication[x].coding.extension"/>
      <slicing>
        <discriminator>
          <type value="value"/>
          <path value="url"/>
        </discriminator>
        <rules value="open"/>
      </slicing>
    </element>
    <element
      id="MedicationDispense.medication[x]:medicationCoded.coding:amtMPP.extension:medicationType">
      <path value="MedicationDispense.medication[x].coding.extension"/>
      <sliceName value="medicationType"/>
      <short value="Type of Medication Coding"/>
      <definition
        value="General category of coding to allow usage of codes to be distinguished from the same CodeSystem"/>
      <max value="1"/>
      <type>
        <code value="Extension"/>
        <profile value="http://hl7.org.au/fhir/StructureDefinition/medication-type"/>
      </type>
    </element>
    <element
      id="MedicationDispense.medication[x]:medicationCoded.coding:amtMPP.extension:medicationType.valueCoding:valueCoding">
      <path value="MedicationDispense.medication[x].coding.extension.valueCoding"/>
      <sliceName value="valueCoding"/>
      <fixedCoding>
        <system value="http://hl7.org.au/fhir/CodeSystem/medication-type"/>
        <code value="UPG"/>
        <display value="Unbranded package with no container"/>
      </fixedCoding>
    </element>
    <element id="MedicationDispense.medication[x]:medicationCoded.coding:amtCTPP">
      <path value="MedicationDispense.medication[x].coding"/>
      <sliceName value="amtCTPP"/>
      <short value="AMT Containered Trade Product Pack"/>
      <max value="1"/>
      <binding>
        <strength value="required"/>
        <valueSetReference>
          <reference value="http://hl7.org.au/fhir/ValueSet/amt-ctpp-codes"/>
        </valueSetReference>
      </binding>
    </element>
    <element id="MedicationDispense.medication[x]:medicationCoded.coding:amtCTPP.extension">
      <path value="MedicationDispense.medication[x].coding.extension"/>
      <slicing>
        <discriminator>
          <type value="value"/>
          <path value="url"/>
        </discriminator>
        <rules value="open"/>
      </slicing>
    </element>
    <element
      id="MedicationDispense.medication[x]:medicationCoded.coding:amtCTPP.extension:medicationType">
      <path value="MedicationDispense.medication[x].coding.extension"/>
      <sliceName value="medicationType"/>
      <short value="Type of Medication Coding"/>
      <definition
        value="General type of coding to allow usage of codes to be distinguished from the same CodeSystem"/>
      <max value="1"/>
      <type>
        <code value="Extension"/>
        <profile value="http://hl7.org.au/fhir/StructureDefinition/medication-type"/>
      </type>
    </element>
    <element
      id="MedicationDispense.medication[x]:medicationCoded.coding:amtCTPP.extension:medicationType.valueCoding:valueCoding">
      <path value="MedicationDispense.medication[x].coding.extension.valueCoding"/>
      <sliceName value="valueCoding"/>
      <fixedCoding>
        <system value="http://hl7.org.au/fhir/CodeSystem/medication-type"/>
        <code value="BPGC"/>
        <display value="Branded package with container"/>
      </fixedCoding>
    </element>
    <element id="MedicationDispense.medication[x]:medicationCoded.coding:amtTPUU">
      <path value="MedicationDispense.medication[x].coding"/>
      <sliceName value="amtTPUU"/>
      <short value="AMT Trade Product Unit of Use"/>
      <max value="1"/>
      <binding>
        <strength value="required"/>
        <valueSetReference>
          <reference value="http://hl7.org.au/fhir/ValueSet/amt-tpuu-codes"/>
        </valueSetReference>
      </binding>
    </element>
    <element id="MedicationDispense.medication[x]:medicationCoded.coding:amtTPUU.extension">
      <path value="MedicationDispense.medication[x].coding.extension"/>
      <slicing>
        <discriminator>
          <type value="value"/>
          <path value="url"/>
        </discriminator>
        <rules value="open"/>
      </slicing>
    </element>
    <element
      id="MedicationDispense.medication[x]:medicationCoded.coding:amtTPUU.extension:medicationType">
      <path value="MedicationDispense.medication[x].coding.extension"/>
      <sliceName value="medicationType"/>
      <short value="Type of Medication Coding"/>
      <max value="1"/>
      <type>
        <code value="Extension"/>
        <profile value="http://hl7.org.au/fhir/StructureDefinition/medication-type"/>
      </type>
    </element>
    <element
      id="MedicationDispense.medication[x]:medicationCoded.coding:amtTPUU.extension:medicationType.valueCoding:valueCoding">
      <path value="MedicationDispense.medication[x].coding.extension.valueCoding"/>
      <sliceName value="valueCoding"/>
      <fixedCoding>
        <system value="http://hl7.org.au/fhir/CodeSystem/medication-type"/>
        <code value="BPDSF"/>
        <display value="Branded product with strengths and form"/>
      </fixedCoding>
    </element>
    <element id="MedicationDispense.medication[x]:medicationCoded.coding:amtMPUU">
      <path value="MedicationDispense.medication[x].coding"/>
      <sliceName value="amtMPUU"/>
      <short value="AMT Medicinal Product Unit of Use"/>
      <max value="1"/>
      <binding>
        <strength value="required"/>
        <valueSetReference>
          <reference value="http://hl7.org.au/fhir/ValueSet/amt-mpuu-codes"/>
        </valueSetReference>
      </binding>
    </element>
    <element id="MedicationDispense.medication[x]:medicationCoded.coding:amtMPUU.extension">
      <path value="MedicationDispense.medication[x].coding.extension"/>
      <slicing>
        <discriminator>
          <type value="value"/>
          <path value="url"/>
        </discriminator>
        <rules value="open"/>
      </slicing>
    </element>
    <element
      id="MedicationDispense.medication[x]:medicationCoded.coding:amtMPUU.extension:medicationType">
      <path value="MedicationDispense.medication[x].coding.extension"/>
      <sliceName value="medicationType"/>
      <short value="Type of Medication Coding"/>
      <max value="1"/>
      <type>
        <code value="Extension"/>
        <profile value="http://hl7.org.au/fhir/StructureDefinition/medication-type"/>
      </type>
    </element>
    <element
      id="MedicationDispense.medication[x]:medicationCoded.coding:amtMPUU.extension:medicationType.valueCoding:valueCoding">
      <path value="MedicationDispense.medication[x].coding.extension.valueCoding"/>
      <sliceName value="valueCoding"/>
      <fixedCoding>
        <system value="http://hl7.org.au/fhir/CodeSystem/medication-type"/>
        <code value="UPDSF"/>
        <display value="Unbranded product with strengths and form"/>
      </fixedCoding>
    </element>
    <element id="MedicationDispense.medication[x]:medicationCoded.coding:amtTP">
      <path value="MedicationDispense.medication[x].coding"/>
      <sliceName value="amtTP"/>
      <short value="AMT Trade Product"/>
      <max value="1"/>
      <binding>
        <strength value="required"/>
        <valueSetReference>
          <reference value="http://hl7.org.au/fhir/ValueSet/amt-tp-codes"/>
        </valueSetReference>
      </binding>
    </element>
    <element id="MedicationDispense.medication[x]:medicationCoded.coding:amtTP.extension">
      <path value="MedicationDispense.medication[x].coding.extension"/>
      <slicing>
        <discriminator>
          <type value="value"/>
          <path value="url"/>
        </discriminator>
        <rules value="open"/>
      </slicing>
    </element>
    <element
      id="MedicationDispense.medication[x]:medicationCoded.coding:amtTP.extension:medicationType">
      <path value="MedicationDispense.medication[x].coding.extension"/>
      <sliceName value="medicationType"/>
      <short value="Type of Medication Coding"/>
      <max value="1"/>
      <type>
        <code value="Extension"/>
        <profile value="http://hl7.org.au/fhir/StructureDefinition/medication-type"/>
      </type>
    </element>
    <element
      id="MedicationDispense.medication[x]:medicationCoded.coding:amtTP.extension:medicationType.valueCoding:valueCoding">
      <path value="MedicationDispense.medication[x].coding.extension.valueCoding"/>
      <sliceName value="valueCoding"/>
      <fixedCoding>
        <system value="http://hl7.org.au/fhir/CodeSystem/medication-type"/>
        <code value="BPD"/>
        <display value="Branded product with no strengths or form"/>
      </fixedCoding>
    </element>
    <element id="MedicationDispense.medication[x]:medicationCoded.coding:amtMP">
      <path value="MedicationDispense.medication[x].coding"/>
      <sliceName value="amtMP"/>
      <short value="AMT Medicinal Product"/>
      <max value="1"/>
      <binding>
        <strength value="required"/>
        <valueSetReference>
          <reference value="http://hl7.org.au/fhir/ValueSet/amt-mp-codes"/>
        </valueSetReference>
      </binding>
    </element>
    <element id="MedicationDispense.medication[x]:medicationCoded.coding:amtMP.extension">
      <path value="MedicationDispense.medication[x].coding.extension"/>
      <slicing>
        <discriminator>
          <type value="value"/>
          <path value="url"/>
        </discriminator>
        <rules value="open"/>
      </slicing>
    </element>
    <element
      id="MedicationDispense.medication[x]:medicationCoded.coding:amtMP.extension:medicationType">
      <path value="MedicationDispense.medication[x].coding.extension"/>
      <sliceName value="medicationType"/>
      <short value="Type of Medication Coding"/>
      <max value="1"/>
      <type>
        <code value="Extension"/>
        <profile value="http://hl7.org.au/fhir/StructureDefinition/medication-type"/>
      </type>
    </element>
    <element
      id="MedicationDispense.medication[x]:medicationCoded.coding:amtMP.extension:medicationType.valueCoding:valueCoding">
      <path value="MedicationDispense.medication[x].coding.extension.valueCoding"/>
      <sliceName value="valueCoding"/>
      <fixedCoding>
        <system value="http://hl7.org.au/fhir/CodeSystem/medication-type"/>
        <code value="UPD"/>
        <display value="Unbranded product with no strengths or form"/>
      </fixedCoding>
    </element>
    <element id="MedicationDispense.medication[x]:medicationCoded.coding:mimsPackage">
      <path value="MedicationDispense.medication[x].coding"/>
      <sliceName value="mimsPackage"/>
      <short value="MIMS Package"/>
      <max value="1"/>
      <binding>
        <strength value="required"/>
        <valueSetReference>
          <reference value="http://hl7.org.au/fhir/ValueSet/mims"/>
        </valueSetReference>
      </binding>
    </element>
    <element id="MedicationDispense.medication[x]:medicationCoded.text">
      <extension url="http://hl7.org/fhir/StructureDefinition/elementdefinition-translatable">
        <valueBoolean value="true"/>
      </extension>
      <path value="MedicationDispense.medication[x].text"/>
      <short value="Medication primary text"/>
      <definition
        value="A human language representation of the concept as seen/selected/uttered by the user who entered the data and/or which represents the intended meaning of the user.&#xD;&#xA;&#xD;&#xA;This may be a brand or generic name as suitable for the intent of the entry."
      />
    </element>
    <element id="MedicationDispense.medication[x]:medicationReference">
      <path value="MedicationDispense.medication[x]"/>
      <sliceName value="medicationReference"/>
      <short value="Dispensed Medication"/>
      <type>
        <code value="Reference"/>
        <targetProfile value="http://hl7.org.au/fhir/StructureDefinition/au-medication"/>
      </type>
    </element>
    <element id="MedicationDispense.authorizingPrescription">
      <path value="MedicationDispense.authorizingPrescription"/>
      <type>
        <code value="Reference"/>
        <targetProfile value="http://hl7.org.au/fhir/StructureDefinition/au-prescription"/>
      </type>
    </element>
    <element id="MedicationDispense.dosageInstruction">
      <path value="MedicationDispense.dosageInstruction"/>
      <type>
        <code value="Dosage"/>
        <profile value="http://hl7.org.au/fhir/StructureDefinition/au-dosage"/>
      </type>
    </element>
    <element id="MedicationDispense.substitution">
      <path value="MedicationDispense.substitution"/>
    </element>
    <element id="MedicationDispense.substitution.reason">
      <path value="MedicationDispense.substitution.reason"/>
      <max value="1"/>
    </element>
    <element id="MedicationDispense.substitution.reason.coding">
      <path value="MedicationDispense.substitution.reason.coding"/>
      <slicing>
        <discriminator>
          <type value="value"/>
          <path value="system"/>
        </discriminator>
        <rules value="open"/>
      </slicing>
    </element>
    <element id="MedicationDispense.substitution.reason.coding:snomedSubstitutionReason">
      <path value="MedicationDispense.substitution.reason.coding"/>
      <sliceName value="snomedSubstitutionReason"/>
      <short value="Substitution Reason (SNOMED CT)"/>
      <max value="1"/>
      <binding>
        <strength value="required"/>
        <valueSetUri
          value="https://healthterminologies.gov.au/fhir/ValueSet/medicine-substitution-reason-1"/>
      </binding>
    </element>
  </differential>
</StructureDefinition>
